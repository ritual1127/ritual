<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>메카 1학년 4반</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }

    nav {
      display: flex;
      justify-content: center;
      background: #007acc;
    }

    nav button {
      flex: 1;
      padding: 15px;
      border: none;
      background: #007acc;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    nav button.active {
      background: #005fa3;
    }

    .section {
      display: none;
      padding: 20px;
    }

    .section.active {
      display: block;
    }

    /* 시간표 스타일 (간략화) */
    .slider-container { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; scroll-behavior: smooth; }
    .slide { flex: 0 0 100%; scroll-snap-align: start; padding: 20px; box-sizing: border-box; }
    .card { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    ul { list-style: none; padding: 0; }
    li { padding: 5px 0; border-bottom: 1px solid #eee; }

    /* 달력 스타일 */
    .calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; max-width: 700px; margin: auto; }
    .day { background: white; border: 1px solid #ddd; min-height: 80px; padding: 10px; cursor: pointer; display: flex; flex-direction: column; justify-content: space-between; }
    .today { border: 2px solid #007acc; }
    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); display: none; justify-content: center; align-items: center; z-index: 10; }
    .modal-content { background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px; }
    .modal-content h2 { margin-top: 0; }
    textarea { width: 100%; padding: 10px; box-sizing: border-box; margin-top: 10px; }
    .note { font-size: 13px; color: #555; margin-top: 5px; white-space: pre-wrap; }

  </style>
</head>
<body>

  <nav>
    <button class="active" onclick="showSection('timetable')">시간표</button>
    <button onclick="showSection('calendar')">달력 스케줄</button>
  </nav>

  <!-- 시간표 섹션 -->
  <div id="timetable" class="section active">
    <h1 style="text-align:center;">📘 메카 1학년 4반 시간표</h1>
    <div class="slider-container">
      <div class="slide"><div class="card"><h2>월요일</h2><ul id="monList"></ul></div></div>
      <div class="slide"><div class="card"><h2>화요일</h2><ul id="tueList"></ul></div></div>
      <div class="slide"><div class="card"><h2>수요일</h2><ul id="wedList"></ul></div></div>
      <div class="slide"><div class="card"><h2>목요일</h2><ul id="thuList"></ul></div></div>
      <div class="slide"><div class="card"><h2>금요일</h2><ul id="friList"></ul></div></div>
    </div>
  </div>

  <!-- 달력 섹션 -->
  <div id="calendar" class="section">
    <h1 style="text-align:center;">📅 나의 스케줄 달력</h1>
    <div id="calendarGrid" class="calendar"></div>
  </div>

  <!-- 모달창 -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2 id="modal-date">날짜</h2>
      <textarea id="scheduleInput" rows="5" placeholder="이 날의 스케줄을 입력하세요"></textarea>
      <div style="text-align: right; margin-top:10px;">
        <button onclick="closeModal()">취소</button>
        <button onclick="saveSchedule()">저장</button>
      </div>
    </div>
  </div>

  <script>
    // 시간표 데이터
    const timetable = {
      "월": ["독서", "통과1", "통과2", "체육2", "영어", "수학", "진로"],
      "화": ["수학", "한국사", "디논", "디논", "전자", "전자", "전자"],
      "수": ["영어", "수학", "한국사", "전기", "전기", "창체", "창체"],
      "목": ["미술", "미술", "조립", "조립", "프밍", "프밍", "프밍"],
      "금": ["한국사", "통과2", "체육1", "원어민", "수학", "통과1", ""]
    };

    function renderTimetable() {
      const map = { "월":"monList", "화":"tueList", "수":"wedList", "목":"thuList", "금":"friList" };
      for (const day in timetable) {
        const ul = document.getElementById(map[day]);
        ul.innerHTML = "";
        timetable[day].forEach((subject, i) => {
          ul.innerHTML += `<li>${i + 1}교시: ${subject || "없음"}</li>`;
        });
      }
    }

    // 섹션 전환
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
    }

    // ---------------- 달력 기능 ----------------
    const calendarGrid = document.getElementById('calendarGrid');
    const modal = document.getElementById('modal');
    const modalDate = document.getElementById('modal-date');
    const scheduleInput = document.getElementById('scheduleInput');
    let selectedDate = "";

    function renderCalendar() {
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();
      const firstDay = new Date(year, month, 1);
      const lastDate = new Date(year, month + 1, 0).getDate();
      const startDay = firstDay.getDay();

      calendarGrid.innerHTML = "";
      const daysKor = ['일', '월', '화', '수', '목', '금', '토'];
      daysKor.forEach(d => {
        const dayEl = document.createElement('div');
        dayEl.innerHTML = `<strong>${d}</strong>`;
        calendarGrid.appendChild(dayEl);
      });

      for (let i = 0; i < startDay; i++) {
        calendarGrid.appendChild(document.createElement('div'));
      }

      for (let d = 1; d <= lastDate; d++) {
        const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${d.toString().padStart(2, '0')}`;
        const box = document.createElement('div');
        box.className = 'day';
        if (dateStr === getTodayStr()) box.classList.add('today');
        box.innerHTML = `<div><strong>${d}</strong></div><div class="note">${loadSchedule(dateStr)}</div>`;
        box.onclick = () => openModal(dateStr);
        calendarGrid.appendChild(box);
      }
    }

    function openModal(date) {
      selectedDate = date;
      modalDate.innerText = `📌 ${date} 스케줄`;
      scheduleInput.value = loadSchedule(date);
      modal.style.display = 'flex';
    }

    function closeModal() {
      modal.style.display = 'none';
    }

    function saveSchedule() {
      localStorage.setItem(`schedule-${selectedDate}`, scheduleInput.value);
      closeModal();
      renderCalendar();
    }

    function loadSchedule(date) {
      return localStorage.getItem(`schedule-${date}`) || '';
    }

    function getTodayStr() {
      const t = new Date();
      return `${t.getFullYear()}-${(t.getMonth() + 1).toString().padStart(2, '0')}-${t.getDate().toString().padStart(2, '0')}`;
    }

    renderTimetable();
    renderCalendar();
  </script>
</body>
</html>
