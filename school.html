<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ë©”ì¹´ 1í•™ë…„ 4ë°˜</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }

    nav {
      display: flex;
      justify-content: center;
      background: #007acc;
    }

    nav button {
      flex: 1;
      padding: 15px;
      border: none;
      background: #007acc;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    nav button.active {
      background: #005fa3;
    }

    .section {
      display: none;
      padding: 20px;
    }

    .section.active {
      display: block;
    }

    /* ì‹œê°„í‘œ ìŠ¤íƒ€ì¼ (ê°„ëµí™”) */
    .slider-container { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; scroll-behavior: smooth; }
    .slide { flex: 0 0 100%; scroll-snap-align: start; padding: 20px; box-sizing: border-box; }
    .card { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
    ul { list-style: none; padding: 0; }
    li { padding: 5px 0; border-bottom: 1px solid #eee; }

    /* ë‹¬ë ¥ ìŠ¤íƒ€ì¼ */
    .calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; max-width: 700px; margin: auto; }
    .day { background: white; border: 1px solid #ddd; min-height: 80px; padding: 10px; cursor: pointer; display: flex; flex-direction: column; justify-content: space-between; }
    .today { border: 2px solid #007acc; }
    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); display: none; justify-content: center; align-items: center; z-index: 10; }
    .modal-content { background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px; }
    .modal-content h2 { margin-top: 0; }
    textarea { width: 100%; padding: 10px; box-sizing: border-box; margin-top: 10px; }
    .note { font-size: 13px; color: #555; margin-top: 5px; white-space: pre-wrap; }

  </style>
</head>
<body>

  <nav>
    <button class="active" onclick="showSection('timetable')">ì‹œê°„í‘œ</button>
    <button onclick="showSection('calendar')">ë‹¬ë ¥ ìŠ¤ì¼€ì¤„</button>
  </nav>

  <!-- ì‹œê°„í‘œ ì„¹ì…˜ -->
  <div id="timetable" class="section active">
    <h1 style="text-align:center;">ğŸ“˜ ë©”ì¹´ 1í•™ë…„ 4ë°˜ ì‹œê°„í‘œ</h1>
    <div class="slider-container">
      <div class="slide"><div class="card"><h2>ì›”ìš”ì¼</h2><ul id="monList"></ul></div></div>
      <div class="slide"><div class="card"><h2>í™”ìš”ì¼</h2><ul id="tueList"></ul></div></div>
      <div class="slide"><div class="card"><h2>ìˆ˜ìš”ì¼</h2><ul id="wedList"></ul></div></div>
      <div class="slide"><div class="card"><h2>ëª©ìš”ì¼</h2><ul id="thuList"></ul></div></div>
      <div class="slide"><div class="card"><h2>ê¸ˆìš”ì¼</h2><ul id="friList"></ul></div></div>
    </div>
  </div>

  <!-- ë‹¬ë ¥ ì„¹ì…˜ -->
  <div id="calendar" class="section">
    <h1 style="text-align:center;">ğŸ“… ë‚˜ì˜ ìŠ¤ì¼€ì¤„ ë‹¬ë ¥</h1>
    <div id="calendarGrid" class="calendar"></div>
  </div>

  <!-- ëª¨ë‹¬ì°½ -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2 id="modal-date">ë‚ ì§œ</h2>
      <textarea id="scheduleInput" rows="5" placeholder="ì´ ë‚ ì˜ ìŠ¤ì¼€ì¤„ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
      <div style="text-align: right; margin-top:10px;">
        <button onclick="closeModal()">ì·¨ì†Œ</button>
        <button onclick="saveSchedule()">ì €ì¥</button>
      </div>
    </div>
  </div>

  <script>
    // ì‹œê°„í‘œ ë°ì´í„°
    const timetable = {
      "ì›”": ["ë…ì„œ", "í†µê³¼1", "í†µê³¼2", "ì²´ìœ¡2", "ì˜ì–´", "ìˆ˜í•™", "ì§„ë¡œ"],
      "í™”": ["ìˆ˜í•™", "í•œêµ­ì‚¬", "ë””ë…¼", "ë””ë…¼", "ì „ì", "ì „ì", "ì „ì"],
      "ìˆ˜": ["ì˜ì–´", "ìˆ˜í•™", "í•œêµ­ì‚¬", "ì „ê¸°", "ì „ê¸°", "ì°½ì²´", "ì°½ì²´"],
      "ëª©": ["ë¯¸ìˆ ", "ë¯¸ìˆ ", "ì¡°ë¦½", "ì¡°ë¦½", "í”„ë°", "í”„ë°", "í”„ë°"],
      "ê¸ˆ": ["í•œêµ­ì‚¬", "í†µê³¼2", "ì²´ìœ¡1", "ì›ì–´ë¯¼", "ìˆ˜í•™", "í†µê³¼1", ""]
    };

    function renderTimetable() {
      const map = { "ì›”":"monList", "í™”":"tueList", "ìˆ˜":"wedList", "ëª©":"thuList", "ê¸ˆ":"friList" };
      for (const day in timetable) {
        const ul = document.getElementById(map[day]);
        ul.innerHTML = "";
        timetable[day].forEach((subject, i) => {
          ul.innerHTML += `<li>${i + 1}êµì‹œ: ${subject || "ì—†ìŒ"}</li>`;
        });
      }
    }

    // ì„¹ì…˜ ì „í™˜
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.target.classList.add('active');
    }

    // ---------------- ë‹¬ë ¥ ê¸°ëŠ¥ ----------------
    const calendarGrid = document.getElementById('calendarGrid');
    const modal = document.getElementById('modal');
    const modalDate = document.getElementById('modal-date');
    const scheduleInput = document.getElementById('scheduleInput');
    let selectedDate = "";

    function renderCalendar() {
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();
      const firstDay = new Date(year, month, 1);
      const lastDate = new Date(year, month + 1, 0).getDate();
      const startDay = firstDay.getDay();

      calendarGrid.innerHTML = "";
      const daysKor = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
      daysKor.forEach(d => {
        const dayEl = document.createElement('div');
        dayEl.innerHTML = `<strong>${d}</strong>`;
        calendarGrid.appendChild(dayEl);
      });

      for (let i = 0; i < startDay; i++) {
        calendarGrid.appendChild(document.createElement('div'));
      }

      for (let d = 1; d <= lastDate; d++) {
        const dateStr = `${year}-${(month + 1).toString().padStart(2, '0')}-${d.toString().padStart(2, '0')}`;
        const box = document.createElement('div');
        box.className = 'day';
        if (dateStr === getTodayStr()) box.classList.add('today');
        box.innerHTML = `<div><strong>${d}</strong></div><div class="note">${loadSchedule(dateStr)}</div>`;
        box.onclick = () => openModal(dateStr);
        calendarGrid.appendChild(box);
      }
    }

    function openModal(date) {
      selectedDate = date;
      modalDate.innerText = `ğŸ“Œ ${date} ìŠ¤ì¼€ì¤„`;
      scheduleInput.value = loadSchedule(date);
      modal.style.display = 'flex';
    }

    function closeModal() {
      modal.style.display = 'none';
    }

    function saveSchedule() {
      localStorage.setItem(`schedule-${selectedDate}`, scheduleInput.value);
      closeModal();
      renderCalendar();
    }

    function loadSchedule(date) {
      return localStorage.getItem(`schedule-${date}`) || '';
    }

    function getTodayStr() {
      const t = new Date();
      return `${t.getFullYear()}-${(t.getMonth() + 1).toString().padStart(2, '0')}-${t.getDate().toString().padStart(2, '0')}`;
    }

    renderTimetable();
    renderCalendar();
  </script>
</body>
</html>
